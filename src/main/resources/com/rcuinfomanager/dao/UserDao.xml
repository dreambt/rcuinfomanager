<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rcuinfomanager.dao.UserDao">

    <resultMap id="userMap" type="com.rcuinfomanager.model.User">
        <id column="userId" property="userId"/>
        <result column="organizationId" property="organizationId" />
        <result column="userName" property="userName"></result>
        <result column="password" property="password"></result>
        <result column="displayUserName" property="displayUserName"></result>
        <result column="createTime" property="createTime"></result>
        <result column="lastLoginTime" property="lastLoginTime"></result>
        <result column="curDesignateFlag" property="curDesignateFlag"></result>
        <result column="note1" property="note1"></result>
        <result column="note2" property="note2"></result>
        <result column="note3" property="note3"></result>
        <result column="note4" property="note4"></result>
    </resultMap>

    <select id="getUserById" parameterType="java.lang.Integer" resultMap="userMap">
        SELECT * FROM usersinfo u WHERE u.userId = #{id}
    </select>

    <select id="getUserByUserName" parameterType="java.lang.String" resultMap="userMap">
        SELECT * FROM usersinfo u WHERE u.userName = #{userName} LIMIT 1
    </select>

    <!-- 获取管理员和普通用户-->
    <select id="getUserManager" parameterType="java.lang.String" resultType="com.rcuinfomanager.model.User">
          select u.userId, u.lastLoginTime from usersinfo u where u.userName=#{userName}
    </select>

    <insert id="saveUser" parameterType="com.rcuinfomanager.model.User">
        INSERT INTO usersinfo(organization_id,user_name,password,named,cur_designate_flag,create_time,last_login_time,note1,note2,note3,note4)
        VALUES(#{organizationId},#{userName},#{password},#{name},#{curDesignateFlag},#{createTime},,#{lastLoginTime},#{note1},#{note2},#{note3},#{note4})
    </insert>

    <update id="updateUser" parameterType="com.rcuinfomanager.model.User">
        UPDATE usersinfo SET password = #{password} WHERE userId=#{userId}
    </update>

    <delete id="deleteUser" parameterType="java.lang.Integer">
        DELETE FROM user_info WHERE user_id=#{id}
    </delete>



</mapper>